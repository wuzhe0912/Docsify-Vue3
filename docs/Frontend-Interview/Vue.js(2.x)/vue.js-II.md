# Vue.js - II

## 11. Vuex 有哪些屬性，請分別描述：
1. `actions`：將資料透過`commit`提交，若有額外參數(官方常用命名`payload`)也可以傳入。
2. `mutations`：接收到傳過來的資料後，賦值給`state`。
3. `state`：保存全域使用的變數狀態，方便`component`可以直接使用。
4. `getters`：可以理解為`vuex`的`computed`，只是將保存的值放在`vuex`計算。
5. `modules`：讓`vuex`可以更為結構化，需要聲明`namespaced: true`，讓路徑根據模組自動調整命名，但在應用上需要注意路徑名稱，譬如：`this.$store.dispatch('user/setCurrentChannel', this.isCurrentChannel)`，同時在根目錄上的`vuex`需要添加`modules: { user: user }`。

## 12. Vuex 適合存放怎樣的資料？
舉例來說，平台商可能接入多種遊戲商，每家遊戲商的做法不同，有些可能有開放試玩，有些可能沒有，因此在使用者帳號資訊中，就會存在三種狀態情境，登入、未登入、試玩，無論是遊戲商頁面、會員首頁的錢包顯示，這些頁面都要判斷登入顯示什麼，未登入顯示什麼。

如果每頁都呼叫一次使用者資訊的`API`，那就顯得太過缺乏效率，所以我們會把使用者帳號的資料狀態存放在 `Vuex`，當用戶進行註冊登入時，則更新`Vuex`的狀態，這樣全域有調用該狀態的`component`也就自動隨之更新。

## 13. 什麼情境下，需使用 Vuex？
`Vue`的專案中，通常會有多個`component`組成，尤其專案越大組成結構就越複雜，有些資料會是多個頁面需要共用，這個時候不可能仰賴父子組件傳值，萬一組件和組件之間隔了好幾層，那效益就太差了，這時通常就會抽離到 `Vuex`進行狀態管理。

舉例來說，常見的使用者帳號資料`userInfo`，在`login`和`logout`兩種狀態下，頁面需要顯示的內容會有所差異，不可能在每一個需要使用`userInfo`的`component`都寫一遍呼叫`api`的函式，所以無論是初始的資料或是呼叫`api`的函式，這時候就會統一寫在`Vuex`，方便直接`commit`更新`state`，需要使用的`component`再透過 `mapState`去載入。

## 14. keep-alive 的用法
可以理解為一種暫存資料的方式，假設後台有一些表單需要填寫時，可能使用者會需要來回切換不同區塊，這時候會導致原先填寫到一半的資料消失，透過`keep-alive`去包裹，可以暫時存放資料，優化使用體驗。

## 15. 簡單說一下 slot 是什麼？
基本操作和`component`雷同，載入需要插入的`component`，再透過父子組件傳值，差別在於，接受傳值的子組件需要在`template`上使用`slot`標籤，這個標籤內的內容，則會渲染父組件傳過來的子內容或子節點，內容在父組件會使用雙花括號包裹。當然如果父組件沒有傳值，也可以直接使用子組件的資料來顯示。

## 16. 如果在 v-for 中不設 key 會發生什麼問題？
因為對於程式來說，它們的思考是很死板的，如果沒有設定唯一值的`Key`，當我們對陣列進行操作時，就會造成實際結果和預期結果完全不同。譬如說：A array 中有三種水果，依序為蘋果、西瓜、葡萄，我刪除了西瓜的位置，index 上固然是 1、3，但對 vue 來說，在遍歷中它只會認為是目錄2被改成3，同時元素又因為沒有被刪除，在就地複用的原則下，就變成`1: 蘋果`、`3: 西瓜`。所以透過唯一值的`Key`，讓`v-for`在遍歷中，若要進行操作可以正常執行。

另外，`key`作為唯一值時，對`vue`的底層虛擬`DOM`渲染也有幫助(涉及`diff`演算法)，當擁有唯一值時，即便陣列或物件中加入新的資料，`vue`可以避免重複渲染的問題，對效能提升有幫助。

## 17. component 之間有哪些傳遞資料的方式？
狹義來說主要是父子組件傳值、同層級傳值、全域管理：
  - 父子組件，通過`props`接收父組件傳下來的資料，同時也能透過`@emit`來呼叫父組件執行函式。
  - 兄弟組件，同層級組件可以透過`EventBus`傳遞資料。
  - `Vuex`是常見的專案狀態管理，如果有多個組件需要複用的狀態或是函式，可以統一由`Vuex`來管理。

廣義來說，我會認為還有兩種狀況也算是傳遞資料的方式：
  - `localStorage`或是`sessionStorage`存放的資料，組件間也是能調用。
  - `router.push`中例如`query`或是`params`也是可以帶入參數，等同是傳遞資料給進入的下一個組件。

## 18. 什麼是 Vue.use()?
如果我們有安裝依賴在`Vue`的套件，可以透過`Vue.use()`的方法，把套件註冊到全域環境，讓其他`component` 可以直接使用，而不需要每頁都`import`該插件。

## 19. Vue 有幾種導航守衛？
- `router.beforeEach`：註冊在全域的`router`檢測，`to`代表要前往的`router`，`from`則是來自哪裡？`next`選擇調用的方法，常見是選擇前往某頁面或是選擇中斷。
- `router.beforeEnter`：參數同`router.beforeEach`相同，但使用在單一的`router`內。
- 下述守衛則較少使用：
  - `router.beforeResolve`
  - `router.beforeRouteEnter`
  - `router.beforeRouteUpdate`
  - `router.beforeRouteLeave`

## 20. computed 和 watch 的差異？
`computed`除了計算屬性的特性外，其主要目的是為了在目前已有的資料上進行更新，所以本身帶有緩存的特性。相反的`watch`則是監聽資料的變化，因此每次監聽時都是初始化的狀況。如果某筆資料必須相依另外一筆資料的話，則使用`computed`，但如果只是要監聽資料變化時，則使用`watch`。